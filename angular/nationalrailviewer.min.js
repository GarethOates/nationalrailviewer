/*! nationalrailviewer 2016-02-17 */
!function(){angular.module("nationalRailViewer",["ngRoute","toastr","ngAnimate"])}(),function(){function configure($routeProvider){$routeProvider.when("/:City",{templateUrl:"angular/views/main.html",controller:"MainController",controllerAs:"vm"}).otherwise({redirectTo:"/Aberdeen"})}configure.$inject=["$routeProvider"],angular.module("nationalRailViewer").config(configure)}(),function(){function MainController(NationalRail,$interval,$routeParams,toastr){function GetData(){NationalRail.getDepartures(vm.city).then(onGetDeparturesComplete,onError),NationalRail.getArrivals(vm.city).then(onGetArrivalsComplete,onError)}var vm=this;vm.city=$routeParams.City;var onGetDeparturesComplete=function(data){vm.departures=data},onGetArrivalsComplete=function(data){vm.arrivals=data},isErrorRaised=!1,onError=function($error){isErrorRaised||(vm.error='Could not load data for "'+vm.city+'"',toastr.error(vm.error,"Error"),isErrorRaised=!isErrorRaised)};GetData(),$interval(GetData,6e4)}MainController.$inject=["NationalRail","$interval","$routeParams","toastr"],angular.module("nationalRailViewer").controller("MainController",MainController)}(),function(){function nationalRail($http){var getDepartures=function(city){return $http.get("http://nationalrail.azurewebsites.net/departures/"+city).then(function(response){return response.data})},getArrivals=function(city){return $http.get("http://nationalrail.azurewebsites.net/arrivals/"+city).then(function(response){return response.data})};return{getDepartures:getDepartures,getArrivals:getArrivals}}nationalRail.$inject=["$http"],angular.module("nationalRailViewer").factory("NationalRail",nationalRail)}();